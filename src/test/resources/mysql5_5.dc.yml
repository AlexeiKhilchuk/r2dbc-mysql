# R2dbc MySQL 5.5 docker compose config
#
# docker-compose -f mysql5_5.dc.yml up --build
# docker-compose -f src/test/resources/mysql5_5.dc.yml up --build
#
# Try using the Registry Mirror in a poorly networked area.

version: "3.3"

volumes:
  mysql5_5_dir:

services:
  test-mysql5_5-r2dbc:
    image: mysql:5.5
    command: [mysqld, --character-set-server=utf8mb4, --collation-server=utf8mb4_general_ci, --port=3304]
    restart: always
    volumes:
      - mysql5_5_dir:/var/lib/mysql
    environment:
      MYSQL_DATABASE: r2dbc
      # Just a random password
      MYSQL_ROOT_PASSWORD: QAcmNnCEs2Sk
    # For testing from the host:
    # mysql --host=127.0.0.1 --port=7320 --user root -p'QAcmNnCEs2Sk'
    ports:
      - "7320:3304"
