# R2dbc MySQL 8.0 docker compose config
#
# docker-compose -f mysql8_0.dc.yml up --build
# docker-compose -f src/test/resources/mysql8_0.dc.yml up --build
#
# Try using the Registry Mirror in a poorly networked area.

version: "3.3"

volumes:
  mysql8_0_dir:

services:
  test-mysql8_0-r2dbc:
    image: mysql:8.0
    command: [mysqld, --character-set-server=utf8mb4, --collation-server=utf8mb4_0900_ai_ci, --port=3307]
    # restart: always
    volumes:
      - mysql8_0_dir:/var/lib/mysql
    environment:
      MYSQL_DATABASE: r2dbc
      # Just a random password
      MYSQL_ROOT_PASSWORD: uCxDsP5RwADk
    # For testing from the host:
    # mysql --host=127.0.0.1 --port=7323 --user root -p'uCxDsP5RwADk'
    ports:
      - "7323:3307"
